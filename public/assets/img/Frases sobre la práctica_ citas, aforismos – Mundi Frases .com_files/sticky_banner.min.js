define("fc/ui/sticky_banner",['jquery','fc/utils','setup'],function($,fc_utils){var module={};module.sidebar=(function(){var threshold=null;var max_threshold=null;var vertical_middle_offset;var $sticky;function _computeSticky(){var w_height=$(window).height();var min_offset_top=$(".navbar-header").height();if(w_height-min_offset_top<$sticky.height()){threshold=null;max_threshold=null;return;}
vertical_middle_offset=((w_height-$sticky.height())/2);vertical_middle_offset=Math.max(vertical_middle_offset,min_offset_top);threshold=$('.adsense-sticky-slide').offset().top-vertical_middle_offset;max_threshold=$("#sidebar").offset().top+$("#sidebar").height()-(w_height-vertical_middle_offset);}
function _setSticky(){var currentScrollTop=$(window).scrollTop();if(threshold&&currentScrollTop>threshold){$('.adsense-sticky-wrapper').addClass('adsense-sticky-attach');$sticky.css('top',vertical_middle_offset);if(max_threshold&&currentScrollTop>max_threshold){$('.adsense-sticky-wrapper').addClass('adsense-sticky-attach-end');}
else{$('.adsense-sticky-wrapper').removeClass('adsense-sticky-attach-end');}}
else{$('.adsense-sticky-wrapper').removeClass('adsense-sticky-attach');$('.adsense-sticky-wrapper').removeClass('adsense-sticky-attach-end');$sticky.css('top',0);}}
function _bind(){fc_utils.responsive.respondOnDocumentResize();$(document).on('window_resize, document_resize',$('body'),function(){_computeSticky();_setSticky();});$(window).scroll(function(){_setSticky();});}
function init(){if($('#sidebar').is(':visible')&&$('#sidebar .adsense .banner-sticky').length>0){$('#sidebar').addClass('adsense-sticky');if($("#content").height()>$("#sidebar").height()){$('#sidebar').addClass('adsense-sticky-active');$sticky=$('#sidebar .adsense .banner-sticky').last();$('.adsense-sticky-wrapper').width($sticky.closest('.adsense').width());_bind();_computeSticky();_setSticky();}
else{$('#sidebar').removeClass('adsense-sticky');}}}
return{'init':init};})();return module;});